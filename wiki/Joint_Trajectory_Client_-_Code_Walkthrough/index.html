<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Joint Trajectory Client - Code Walkthrough - sdk-wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Joint_Trajectory_Client_-_Code_Walkthrough","wgTitle":"Joint Trajectory Client - Code Walkthrough","wgCurRevisionId":3823,"wgRevisionId":3823,"wgArticleId":512,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Joint_Trajectory_Client_-_Code_Walkthrough","wgRelevantArticleId":512,"wgRequestId":"306db83002db561605ad3cd4","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":["autoconfirmed"],"wgRestrictionMove":["autoconfirmed"]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","site":"ready","user.options":"ready","user.tokens":"loading","ext.pygments":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready"});mw.loader.implement("user.tokens@0ppuq4y",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.cavendishmw-rethinkrobotics"]);});</script>
<link rel="stylesheet" href="/wiki/a/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor&amp;only=styles&amp;skin=cavendishmw-rethinkrobotics"/>
<script async="" src="/wiki/a/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=cavendishmw-rethinkrobotics"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/wiki/a/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=cavendishmw-rethinkrobotics"/>
<meta name="generator" content="MediaWiki 1.31.0"/>
<link rel="shortcut icon" href="/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/wiki/a/opensearch_desc.php" title="sdk-wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="http://sdk.rethinkrobotics.com/wiki/a/api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="sdk-wiki Atom feed" href="/wiki/a/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/wiki/a/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=cavendishmw-rethinkrobotics&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Joint_Trajectory_Client_-_Code_Walkthrough rootpage-Joint_Trajectory_Client_-_Code_Walkthrough skin-cavendishmw-rethinkrobotics action-view"><div id="container"><!-- start fragment header -->
    <!-- <div id="mozilla-org"><a href="#">Mozilla Skin</a></div> -->
    <div id="header" class="noprint">
        <a name="top" id="contentTop"></a>

        <!-- Logo + site name -->
        <h1>
            <a href="/wiki/Main_Page" style="text-indent: 2em; width: 194px; height: 67px; background: transparent url(/wiki/a/skins/cavendishmw-rethinkrobotics/styles/images/header_logo.png) no-repeat scroll 5px -5px;" title="Visit the main page">&nbsp;</a>        </h1>

	<div id="rr_ActionWrap">
	<!-- Account action links -->
	<div id="accountActions"><a href="/wiki/a/index.php?title=Special:UserLogin&returnto=Joint+Trajectory+Client+-+Code+Walkthrough">Log in</a></div>
        <!-- Search box -->
            <form action="/wiki/a/index.php" id="searchform">
        <label for="searchInput">Search</label>
        <input type='hidden' name="title" value="Special:Search"/>
        <input type="search" name="search" placeholder="Search sdk-wiki" title="Search sdk-wiki [f]" accesskey="f" id="searchInput"/>
        &#160;
        <input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>    </form>
	</div>
    </div> <!-- End header div -->
<!-- end fragment header --><div id="mBody"><!-- start fragment mainContent -->
<!-- start fragment firstHeader -->
<div id="firstHeadingDiv" class="firstHeading">
    <h1 lang="en"><span dir="auto">Joint Trajectory Client - Code Walkthrough</span></h1>


        <!-- Content action buttons -->
        <ul><li><a href="#">More</a><ul><li id="ca-viewsource"><a href="/wiki/a/index.php?title=Joint_Trajectory_Client_-_Code_Walkthrough&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history"><a href="/wiki/a/index.php?title=Joint_Trajectory_Client_-_Code_Walkthrough&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li></ul></li><li id="ca-nstab-main" class="selected"><a href="/wiki/Joint_Trajectory_Client_-_Code_Walkthrough" title="View the content page [c]" accesskey="c">Page</a></li></ul>
</div><!-- end fragment firstHeader --><!-- start fragment sidebar -->        <div id="side" class="noprint" > <!-- cavendishmw: s/column-one/side/ -->
            <ul id="nav">
                      <li><span>Navigation</span>
            <ul>
                <li id="n-Getting-Started"><a href="/wiki/Getting_Started">Getting Started</a></li>
                <li id="n-Learning"><a href="/wiki/Learning">Learning</a></li>
                <li id="n-Community"><a href="/wiki/Community">Community</a></li>
                <li id="n-Support"><a href="/wiki/Support">Support</a></li>
            </ul>
        </li>
      <li><span>Links</span>
            <ul class="collapsible-collapsed">
                <li id="n-Forum"><a href="https://groups.google.com/a/rethinkrobotics.com/forum/#!forum/brr-users" rel="nofollow">Forum</a></li>
                <li id="n-Source"><a href="https://github.com/RethinkRobotics" rel="nofollow">Source</a></li>
                <li id="n-Source-API"><a href="http://api.rethinkrobotics.com/" rel="nofollow">Source API</a></li>
            </ul>
        </li>
      <li><span>Tools</span>
            <ul class="collapsible-collapsed">
                <li id="n-All-Pages"><a href="/wiki/Special:AllPages">All Pages</a></li>
                <li id="n-Upload-File"><a href="/wiki/Special:Upload">Upload File</a></li>
                <li id="n-What-Links-Here.3F"><a href="/wiki/Special:WhatLinksHere">What Links Here?</a></li>
            </ul>
        </li>
            </ul> <!-- /nav -->
        </div> <!-- /side -->
<!-- end fragment sidebar -->
<div id="mainContent"> <!-- cavendishmw: s/column-content/mainContent/ -->
    
  <div id="bodyContent" class="mw-body">
    <div id="siteSub">From sdk-wiki</div>
    <div id="contentSub"></div>
    <div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>
    
  <!-- start content -->
  <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div style="padding:5px; border:1px solid #ffcc00; background:#FFFDDF; margin-bottom:0.2em; Font-size:140%;"><a href="/wiki/Simple_Joint_trajectory_example" title="Simple Joint trajectory example"><img alt="Back.png" src="/wiki/a/images/b/b9/Back.png" width="29" height="20" /></a> <a href="/wiki/Simple_Joint_trajectory_example" title="Simple Joint trajectory example">Simple Joint trajectory example</a></div>
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>This example demonstrates the usage of the Joint Trajectory Action server that performs a smooth trajectory motion, by sending manipulated joint positions to it. A set of Joint positions are hard-coded in the <code>main()</code> function and these are passed to the <code>start()</code> method. It is here that the joint positions are sent to the joint trajectory action server.<br />
<b>Action Servers -</b> robot/limb/left/follow_joint_trajectory, robot/limb/right/follow_joint_trajectory.
</p>
<h2><span class="mw-headline" id="Code_Walkthrough">Code Walkthrough</span></h2>
<p>Now, let's break down the code.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">33 </span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="lineno">34 </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="lineno">35 </span>
<span class="lineno">36 </span><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>
<span class="lineno">37 </span>
<span class="lineno">38 </span><span class="kn">import</span> <span class="nn">rospy</span>
<span class="lineno">39 </span>
<span class="lineno">40 </span><span class="kn">import</span> <span class="nn">actionlib</span>
<span class="lineno">41 </span>
<span class="lineno">42 </span><span class="kn">from</span> <span class="nn">control_msgs.msg</span> <span class="kn">import</span> <span class="p">(</span>
<span class="lineno">43 </span>    <span class="n">FollowJointTrajectoryAction</span><span class="p">,</span>
<span class="lineno">44 </span>    <span class="n">FollowJointTrajectoryGoal</span><span class="p">,</span>
<span class="lineno">45 </span><span class="p">)</span>
<span class="lineno">46 </span><span class="kn">from</span> <span class="nn">trajectory_msgs.msg</span> <span class="kn">import</span> <span class="p">(</span>
<span class="lineno">47 </span>    <span class="n">JointTrajectoryPoint</span><span class="p">,</span>
<span class="lineno">48 </span><span class="p">)</span>
<span class="lineno">49 </span>
<span class="lineno">50 </span><span class="kn">import</span> <span class="nn">baxter_interface</span>
<span class="lineno">51 </span>
<span class="lineno">52 </span><span class="kn">from</span> <span class="nn">baxter_interface</span> <span class="kn">import</span> <span class="n">CHECK_VERSION</span>
</pre></div>
<p>This imports the baxter interface for accessing the limb and the gripper class. The <code>actionlib</code> is imported to use its <code>Action Server</code> class.The <code>CHECK_VERSION</code> is imported to check if the software running on the robot would be compatible with this local version. It is not necessary to check the version in custom programs.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">55 </span><span class="k">class</span> <span class="nc">Trajectory</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="lineno">56 </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limb</span><span class="p">):</span>
<span class="lineno">57 </span>        <span class="n">ns</span> <span class="o">=</span> <span class="s1">&#39;robot/limb/&#39;</span> <span class="o">+</span> <span class="n">limb</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>
<span class="lineno">58 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">actionlib</span><span class="o">.</span><span class="n">SimpleActionClient</span><span class="p">(</span>
<span class="lineno">59 </span>            <span class="n">ns</span> <span class="o">+</span> <span class="s2">&quot;follow_joint_trajectory&quot;</span><span class="p">,</span>
<span class="lineno">60 </span>            <span class="n">FollowJointTrajectoryAction</span><span class="p">,</span>
<span class="lineno">61 </span>        <span class="p">)</span>
<span class="lineno">62 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_goal</span> <span class="o">=</span> <span class="n">FollowJointTrajectoryGoal</span><span class="p">()</span>
<span class="lineno">63 </span>        <span class="n">server_up</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">wait_for_server</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mf">10.0</span><span class="p">))</span>
<span class="lineno">64 </span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">server_up</span><span class="p">:</span>
<span class="lineno">65 </span>            <span class="n">rospy</span><span class="o">.</span><span class="n">logerr</span><span class="p">(</span><span class="s2">&quot;Timed out waiting for Joint Trajectory&quot;</span>
<span class="lineno">66 </span>                         <span class="s2">&quot; Action Server to connect. Start the action server&quot;</span>
<span class="lineno">67 </span>                         <span class="s2">&quot; before running example.&quot;</span><span class="p">)</span>
<span class="lineno">68 </span>            <span class="n">rospy</span><span class="o">.</span><span class="n">signal_shutdown</span><span class="p">(</span><span class="s2">&quot;Timed out waiting for Action Server&quot;</span><span class="p">)</span>
<span class="lineno">69 </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="lineno">70 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">limb</span><span class="p">)</span>
</pre></div>
<p>Action server client for the corresponding limb is created. The existence of action server for the limb is checked with a timeout of 10 seconds. If they are not available, a shutdown signal is sent and the program exits.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">72 </span>    <span class="k">def</span> <span class="nf">add_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
<span class="lineno">73 </span>        <span class="n">point</span> <span class="o">=</span> <span class="n">JointTrajectoryPoint</span><span class="p">()</span>
<span class="lineno">74 </span>        <span class="n">point</span><span class="o">.</span><span class="n">positions</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span>
<span class="lineno">75 </span>        <span class="n">point</span><span class="o">.</span><span class="n">time_from_start</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
<span class="lineno">76 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_goal</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
</pre></div>
<p>This method creates a request message of the <code>JointTrajectoryPoint</code> type and appends the goal position based on the side of the limb/gripper that is requesting. It compiles a list of joint positions.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">78 </span>    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="lineno">79 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_goal</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="lineno">80 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_goal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_goal</span><span class="p">)</span>
</pre></div>
<p>The request message is sent to the <code>joint trajectory action server</code> to start the execution of the trajectory.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">82 </span>    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="lineno">83 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">cancel_goal</span><span class="p">()</span>
</pre></div>
<p>The trajectory execution is stopped by sending cancel goals to the <code>joint trajectory action server</code>.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">85 </span>    <span class="k">def</span> <span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">15.0</span><span class="p">):</span>
<span class="lineno">86 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">wait_for_result</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">rospy</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span>
</pre></div>
<p>This method waits for the completion of the trajectory execution by <code>joint trajectory action server</code>.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">82 </span>    <span class="k">def</span> <span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="lineno">83 </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>
</pre></div>
<p>The feedback from the <code>joint trajectory action server</code> can be retrieved using this method. This method is not used in this example. However, the user may modify the code and use this method to retrieve feedback messages like the errors, from the action server.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">91 </span>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limb</span><span class="p">):</span>
<span class="lineno">92 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_goal</span> <span class="o">=</span> <span class="n">FollowJointTrajectoryGoal</span><span class="p">()</span>
<span class="lineno">93 </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_goal</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">joint_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">limb</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">joint</span> <span class="k">for</span> <span class="n">joint</span> <span class="ow">in</span> \
<span class="lineno">94 </span>            <span class="p">[</span><span class="s1">&#39;s0&#39;</span><span class="p">,</span> <span class="s1">&#39;s1&#39;</span><span class="p">,</span> <span class="s1">&#39;e0&#39;</span><span class="p">,</span> <span class="s1">&#39;e1&#39;</span><span class="p">,</span> <span class="s1">&#39;w0&#39;</span><span class="p">,</span> <span class="s1">&#39;w1&#39;</span><span class="p">,</span> <span class="s1">&#39;w2&#39;</span><span class="p">]]</span>
</pre></div>
<p>The joint names field in the <code>_goal</code> message is populated with the joint names in the corresponding limb.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno"> 97 </span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="lineno"> 98 </span>    <span class="sd">&quot;&quot;&quot;RSDK Joint Trajectory Example: Simple Action Client</span>
<span class="lineno"> 99 </span>
<span class="lineno">100 </span><span class="sd">    Creates a client of the Joint Trajectory Action Server</span>
<span class="lineno">101 </span><span class="sd">    to send commands of standard action type,</span>
<span class="lineno">102 </span><span class="sd">    control_msgs/FollowJointTrajectoryAction.</span>
<span class="lineno">103 </span>
<span class="lineno">104 </span><span class="sd">    Make sure to start the joint_trajectory_action_server.py</span>
<span class="lineno">105 </span><span class="sd">    first. Then run this example on a specified limb to</span>
<span class="lineno">106 </span><span class="sd">    command a short series of trajectory points for the arm</span>
<span class="lineno">107 </span><span class="sd">    to follow.</span>
<span class="lineno">108 </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="lineno">109 </span>    <span class="n">arg_fmt</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">RawDescriptionHelpFormatter</span>
<span class="lineno">110 </span>    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">formatter_class</span><span class="o">=</span><span class="n">arg_fmt</span><span class="p">,</span>
<span class="lineno">111 </span>                                     <span class="n">description</span><span class="o">=</span><span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
<span class="lineno">112 </span>    <span class="n">required</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s1">&#39;required arguments&#39;</span><span class="p">)</span>
<span class="lineno">113 </span>    <span class="n">required</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<span class="lineno">114 </span>        <span class="s1">&#39;-l&#39;</span><span class="p">,</span> <span class="s1">&#39;--limb&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">],</span>
<span class="lineno">115 </span>        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;send joint trajectory to which limb&#39;</span>
<span class="lineno">116 </span>    <span class="p">)</span>
<span class="lineno">117 </span>    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">rospy</span><span class="o">.</span><span class="n">myargv</span><span class="p">()[</span><span class="mi">1</span><span class="p">:])</span>
<span class="lineno">118 </span>    <span class="n">limb</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">limb</span>
</pre></div>
<p>The side of the limb on which the example is to be executed is parsed from the command line arguments.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="lineno">132 </span>    <span class="n">traj</span> <span class="o">=</span> <span class="n">Trajectory</span><span class="p">(</span><span class="n">limb</span><span class="p">)</span>
<span class="lineno">133 </span>    <span class="n">rospy</span><span class="o">.</span><span class="n">on_shutdown</span><span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
<span class="lineno">134 </span>    <span class="c1"># Command Current Joint Positions first</span>
<span class="lineno">135 </span>    <span class="n">limb_interface</span> <span class="o">=</span> <span class="n">baxter_interface</span><span class="o">.</span><span class="n">limb</span><span class="o">.</span><span class="n">Limb</span><span class="p">(</span><span class="n">limb</span><span class="p">)</span>
<span class="lineno">136 </span>    <span class="n">current_angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">limb_interface</span><span class="o">.</span><span class="n">joint_angle</span><span class="p">(</span><span class="n">joint</span><span class="p">)</span> <span class="k">for</span> <span class="n">joint</span> <span class="ow">in</span> <span class="n">limb_interface</span><span class="o">.</span><span class="n">joint_names</span><span class="p">()]</span>
<span class="lineno">137 </span>    <span class="n">traj</span><span class="o">.</span><span class="n">add_point</span><span class="p">(</span><span class="n">current_angles</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="lineno">138 </span>
<span class="lineno">139 </span>    <span class="c1"># Command Current Joint Positions first</span>
<span class="lineno">140 </span>    <span class="n">limb_interface</span> <span class="o">=</span> <span class="n">baxter_interface</span><span class="o">.</span><span class="n">limb</span><span class="o">.</span><span class="n">Limb</span><span class="p">(</span><span class="n">limb</span><span class="p">)</span>
<span class="lineno">141 </span>    <span class="n">current_angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">limb_interface</span><span class="o">.</span><span class="n">joint_angle</span><span class="p">(</span><span class="n">joint</span><span class="p">)</span> <span class="k">for</span> <span class="n">joint</span> <span class="ow">in</span> <span class="n">limb_interface</span><span class="o">.</span><span class="n">joint_names</span><span class="p">()]</span>
<span class="lineno">142 </span>    <span class="n">traj</span><span class="o">.</span><span class="n">add_point</span><span class="p">(</span><span class="n">current_angles</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="lineno">143 </span>
<span class="lineno">144 </span>    <span class="n">p1</span> <span class="o">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">limb</span><span class="p">]</span>
<span class="lineno">145 </span>    <span class="n">traj</span><span class="o">.</span><span class="n">add_point</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">)</span>
<span class="lineno">146 </span>    <span class="n">traj</span><span class="o">.</span><span class="n">add_point</span><span class="p">([</span><span class="n">x</span> <span class="o">*</span> <span class="mf">0.75</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">],</span> <span class="mf">9.0</span><span class="p">)</span>
<span class="lineno">147 </span>    <span class="n">traj</span><span class="o">.</span><span class="n">add_point</span><span class="p">([</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1.25</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">],</span> <span class="mf">12.0</span><span class="p">)</span>
<span class="lineno">148 </span>    <span class="n">traj</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="lineno">149 </span>    <span class="n">traj</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mf">15.0</span><span class="p">)</span>
<span class="lineno">150 </span>    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Exiting - Joint Trajectory Action Test Complete&quot;</span><span class="p">)</span>
<span class="lineno">151 </span>
<span class="lineno">152 </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="lineno">153 </span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
<p>The joint positions to be passed to the action server are hard coded and then the <code>start()</code> method is called as explained above.
</p>
<!-- 
NewPP limit report
Cached time: 20210920234600
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.037 seconds
Real time usage: 1.137 seconds
Preprocessor visited node count: 46/1000000
Preprocessor generated node count: 248/1000000
Post‐expand include size: 210/2097152 bytes
Template argument size: 62/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 20027/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    1.239      1 Template:Parent_header
100.00%    1.239      1 -total
-->
</div>
<!-- Saved in parser cache with key wikisdk:pcache:idhash:512-0!canonical and timestamp 20210920234559 and revision id 3823
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://sdk.rethinkrobotics.com/wiki/a/index.php?title=Joint_Trajectory_Client_-_Code_Walkthrough&amp;oldid=3823">http://sdk.rethinkrobotics.com/wiki/a/index.php?title=Joint_Trajectory_Client_-_Code_Walkthrough&amp;oldid=3823</a>"</div>
  <div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>  <!-- end content -->
  
    <div class="visualClear"></div>
</div>
</div> <!-- /mainContent -->
<!-- end fragment mainContent --></div> <!-- /mBody --><div class="visualClear"></div><!-- start fragment footer -->    <div id="footer" role="contentinfo">
        <div id="f-poweredbyico">
                <a href="//www.mediawiki.org/"><img src="/wiki/a/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/wiki/a/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /wiki/a/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
            </div>
        <ul id="f-list">
                <li id="copywrite_notice">&copy; 2015 Rethink Robotics. All rights reserved.</li>
                <li id="special_pages"><a href="/wiki/Special:SpecialPages" title="Special:SpecialPages">SpecialPages</a></li>
                <li id="privacy"><a href="/wiki/Sdk-wiki:Privacy_policy" title="Sdk-wiki:Privacy policy">Privacy policy</a></li>
                <li id="about"><a href="/wiki/Sdk-wiki:About" title="Sdk-wiki:About">About sdk-wiki</a></li>
                <li id="disclaimer"><a href="/wiki/Sdk-wiki:General_disclaimer" title="Sdk-wiki:General disclaimer">Disclaimers</a></li>
            </ul>
    </div><!-- end fragment footer --></div><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.037","walltime":"1.137","ppvisitednodes":{"value":46,"limit":1000000},"ppgeneratednodes":{"value":248,"limit":1000000},"postexpandincludesize":{"value":210,"limit":2097152},"templateargumentsize":{"value":62,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":20027,"limit":5000000},"timingprofile":["100.00%    1.239      1 Template:Parent_header","100.00%    1.239      1 -total"]},"cachereport":{"timestamp":"20210920234600","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":50});});</script></body></html>